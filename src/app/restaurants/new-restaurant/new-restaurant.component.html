<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Add restaurant</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding>
  <form #restaurantForm="ngForm" (ngSubmit)="addRestaurant()">
    <ion-list>
      <ion-item>
        <ion-label position="floating">Name</ion-label>
        <ion-input name="name" required [(ngModel)]="newRes.name" #nameModel="ngModel"></ion-input>
        <ion-icon name="checkmark-circle" slot="end" color="success" *ngIf="nameModel.dirty && nameModel.valid"></ion-icon>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Description</ion-label>
        <ion-input name="description" required [(ngModel)]="newRes.description" #descModel="ngModel"></ion-input>
        <ion-icon name="checkmark-circle" slot="end" color="success" *ngIf="descModel.dirty && descModel.valid"></ion-icon>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Cuisine</ion-label>
        <ion-input name="cuisine" required [(ngModel)]="newRes.cuisine" #cuisineModel="ngModel"></ion-input>
        <ion-icon name="checkmark-circle" slot="end" color="success" *ngIf="cuisineModel.dirty && cuisineModel.valid"></ion-icon>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Phone</ion-label>
        <ion-input name="phone" required [(ngModel)]="newRes.phone" #phoneModel="ngModel"></ion-input>
        <ion-icon name="checkmark-circle" slot="end" color="success" *ngIf="phoneModel.dirty && phoneModel.valid"></ion-icon>
      </ion-item>

      <ion-label position="floating">The Restaurant open days:</ion-label>
      <ion-item *ngFor="let day of days; let i = index">
        <ion-checkbox slot="start" checked class="custom-control-input"
        id="checkDay{{ i }}"
        name="days[{{ i }}]"
        [(ngModel)]="daysOpen[i]"></ion-checkbox>
        <ion-label class="custom-control-label ms-2" > {{ day }} </ion-label>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Lat</ion-label>
        <ion-input name="lat" required [(ngModel)]="newRes.lat" #latModel="ngModel"></ion-input>
        <ion-icon name="checkmark-circle" slot="end" color="success" *ngIf="latModel.dirty && latModel.valid"></ion-icon>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Lng</ion-label>
        <ion-input name="lng" required [(ngModel)]="newRes.lng" #lngModel="ngModel"></ion-input>
        <ion-icon name="checkmark-circle" slot="end" color="success" *ngIf="lngModel.dirty && lngModel.valid"></ion-icon>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Address</ion-label>
        <ion-input name="address" required [(ngModel)]="newRes.address" #addressModel="ngModel"></ion-input>
        <ion-icon name="checkmark-circle" slot="end" color="success" *ngIf="addressModel.dirty && addressModel.valid"></ion-icon>
      </ion-item>



      <ion-item>
        <ion-label position="inset">Photo</ion-label>
        <ion-button color="secondary" (click)="takePhoto()">
          <ion-icon name="camera" slot="start"></ion-icon>
          Camera
        </ion-button>
        <ion-button color="tertiary" (click)="pickFromGallery()">
          <ion-icon name="images" slot="start"></ion-icon>
          Gallery
        </ion-button>
      </ion-item>
    </ion-list>
    <ion-img [src]="newRes.image" *ngIf="newRes.image"></ion-img>
    <ion-grid>
      <ion-row>
        <ion-col>
          <ion-button type="submit" color="primary" expand="block" [disabled]="restaurantForm.invalid || !newRes.image">
            <ion-icon name="paper" slot="add-circle"></ion-icon>
            Add Restaurant
          </ion-button>
        </ion-col>
        <ion-col>
          <ion-button color="danger" expand="block" fill="outline" [routerLink]="['/restaurants']" [routerDirection]="'root'">
            <ion-icon name="arrow-undo-circle" slot="start"></ion-icon>
            Cancel
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>
